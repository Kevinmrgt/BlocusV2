# Application Mobile d'Escalade - Fullstack Architecture Document

## Table of Contents

- [Application Mobile d'Escalade - Fullstack Architecture Document](#table-of-contents)
  - [Starter Template or Existing Project](./starter-template-or-existing-project.md)
  - [Change Log](./change-log.md)
  - [High Level Architecture](./high-level-architecture.md)
    - [Technical Summary](./high-level-architecture.md#technical-summary)
    - [Platform and Infrastructure Choice](./high-level-architecture.md#platform-and-infrastructure-choice)
    - [Repository Structure](./high-level-architecture.md#repository-structure)
    - [High Level Architecture Diagram](./high-level-architecture.md#high-level-architecture-diagram)
    - [Architectural Patterns](./high-level-architecture.md#architectural-patterns)
  - [Tech Stack](./tech-stack.md)
    - [Technology Stack Table](./tech-stack.md#technology-stack-table)
  - [Data Models](./data-models.md)
    - [Entity Relationship Diagram](./data-models.md#entity-relationship-diagram)
    - [User](./data-models.md#user)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [Gym](./data-models.md#gym)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [Wall](./data-models.md#wall)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [Boulder](./data-models.md#boulder)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [Validation](./data-models.md#validation)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Business Rules](./data-models.md#business-rules)
    - [Photo Tables (gym_photos, wall_photos, boulder_photos)](./data-models.md#photo-tables-gymphotos-wallphotos-boulderphotos)
      - [TypeScript Interface](./data-models.md#typescript-interface)
  - [API Specification](./api-specification.md)
    - [API Design Approach](./api-specification.md#api-design-approach)
    - [Core API Endpoints](./api-specification.md#core-api-endpoints)
    - [Query Patterns with Supabase Client](./api-specification.md#query-patterns-with-supabase-client)
    - [Authentication Flow](./api-specification.md#authentication-flow)
    - [File Upload Pattern](./api-specification.md#file-upload-pattern)
    - [Error Handling](./api-specification.md#error-handling)
    - [Rate Limiting & Caching](./api-specification.md#rate-limiting-caching)
  - [Components (Logical Components)](./components-logical-components.md)
    - [Component Diagram](./components-logical-components.md#component-diagram)
    - [AuthProvider](./components-logical-components.md#authprovider)
    - [GymStore (Zustand)](./components-logical-components.md#gymstore-zustand)
    - [Custom Hooks](./components-logical-components.md#custom-hooks)
    - [Service Layer](./components-logical-components.md#service-layer)
    - [Supabase Client Configuration](./components-logical-components.md#supabase-client-configuration)
  - [Database Schema (PostgreSQL DDL)](./database-schema-postgresql-ddl.md)
    - [Complete Schema](./database-schema-postgresql-ddl.md#complete-schema)
    - [Storage Buckets Configuration](./database-schema-postgresql-ddl.md#storage-buckets-configuration)
    - [Database Constraints Summary](./database-schema-postgresql-ddl.md#database-constraints-summary)
  - [Frontend Architecture](./frontend-architecture.md)
    - [Navigation Structure](./frontend-architecture.md#navigation-structure)
    - [Navigation Implementation](./frontend-architecture.md#navigation-implementation)
    - [Component Architecture](./frontend-architecture.md#component-architecture)
    - [Key UI Components](./frontend-architecture.md#key-ui-components)
    - [State Management Flow](./frontend-architecture.md#state-management-flow)
    - [Form Handling with Zod](./frontend-architecture.md#form-handling-with-zod)
  - [Backend Architecture (Row Level Security)](./backend-architecture-row-level-security.md)
    - [RLS Overview](./backend-architecture-row-level-security.md#rls-overview)
    - [Role Definitions](./backend-architecture-row-level-security.md#role-definitions)
    - [Helper Functions](./backend-architecture-row-level-security.md#helper-functions)
    - [RLS Policies by Table](./backend-architecture-row-level-security.md#rls-policies-by-table)
      - [Users Table](./backend-architecture-row-level-security.md#users-table)
      - [Gyms Table](./backend-architecture-row-level-security.md#gyms-table)
      - [Gym Admins Table](./backend-architecture-row-level-security.md#gym-admins-table)
      - [Walls Table](./backend-architecture-row-level-security.md#walls-table)
      - [Boulders Table](./backend-architecture-row-level-security.md#boulders-table)
      - [Validations Table](./backend-architecture-row-level-security.md#validations-table)
      - [Favorites Table](./backend-architecture-row-level-security.md#favorites-table)
      - [Comments Table](./backend-architecture-row-level-security.md#comments-table)
      - [Photo Tables (gym_photos, wall_photos, boulder_photos)](./backend-architecture-row-level-security.md#photo-tables-gymphotos-wallphotos-boulderphotos)
    - [Storage Bucket Policies](./backend-architecture-row-level-security.md#storage-bucket-policies)
    - [RLS Policy Matrix](./backend-architecture-row-level-security.md#rls-policy-matrix)
    - [Security Considerations](./backend-architecture-row-level-security.md#security-considerations)
  - [Project Structure](./project-structure.md)
    - [Directory Structure](./project-structure.md#directory-structure)
    - [Environment Configuration](./project-structure.md#environment-configuration)
  - [Deployment](./deployment.md)
    - [EAS Build Configuration](./deployment.md#eas-build-configuration)
    - [CI/CD Pipeline (GitHub Actions)](./deployment.md#cicd-pipeline-github-actions)
    - [Deployment Strategy](./deployment.md#deployment-strategy)
    - [Database Migration Workflow](./deployment.md#database-migration-workflow)
    - [Release Checklist](./deployment.md#release-checklist)
  - [Testing Strategy](./testing-strategy.md)
    - [Test Pyramid](./testing-strategy.md#test-pyramid)
    - [Unit Testing](./testing-strategy.md#unit-testing)
    - [Integration Testing](./testing-strategy.md#integration-testing)
    - [E2E Testing (V2 - Maestro)](./testing-strategy.md#e2e-testing-v2-maestro)
    - [Coverage Goals](./testing-strategy.md#coverage-goals)
  - [Security](./security.md)
    - [Authentication Security](./security.md#authentication-security)
    - [Data Validation](./security.md#data-validation)
    - [Image Upload Security](./security.md#image-upload-security)
    - [Security Headers (Supabase Managed)](./security.md#security-headers-supabase-managed)
    - [Sensitive Data Handling](./security.md#sensitive-data-handling)
    - [Defense in Depth Summary](./security.md#defense-in-depth-summary)
  - [Monitoring & Observability](./monitoring-observability.md)
    - [Crash Reporting (Firebase Crashlytics)](./monitoring-observability.md#crash-reporting-firebase-crashlytics)
    - [Error Boundary Implementation](./monitoring-observability.md#error-boundary-implementation)
    - [Health Monitoring](./monitoring-observability.md#health-monitoring)
    - [Supabase Dashboard Monitoring](./monitoring-observability.md#supabase-dashboard-monitoring)
    - [Analytics (V2 Placeholder)](./monitoring-observability.md#analytics-v2-placeholder)
  - [Document Status](./document-status.md)
    - [Completion Checklist](./document-status.md#completion-checklist)
    - [Next Steps](./document-status.md#next-steps)
    - [Open Questions](./document-status.md#open-questions)
