# Story 1.1: Project Setup & Configuration

## Status

**Approved**

---

## Story

**As a** developer,
**I want** a properly configured React Native project with all dependencies,
**so that** I can start building features on a solid foundation.

---

## Acceptance Criteria

1. Projet React Native initialisé avec Expo (managed workflow)
2. React Navigation configuré avec une structure Tab Navigator vide (3 onglets placeholder)
3. React Query configuré et connecté
4. Configuration TypeScript avec strict mode
5. ESLint et Prettier configurés
6. Structure de dossiers établie (src/screens, src/components, src/services, src/hooks, src/types)
7. L'app se lance sans erreur sur iOS et Android simulators

---

## Tasks / Subtasks

- [ ] **Task 1: Initialize Expo Project** (AC: 1)
  - [ ] Run `npx create-expo-app@latest climbing-app --template blank-typescript`
  - [ ] Verify Expo SDK 52+ is installed
  - [ ] Verify TypeScript 5.3+ configuration
  - [ ] Test app launches with `npx expo start`

- [ ] **Task 2: Configure TypeScript Strict Mode** (AC: 4)
  - [ ] Update `tsconfig.json` with strict settings
  - [ ] Add path aliases (`@/*` → `src/*`)
  - [ ] Configure `babel.config.js` for path aliases

- [ ] **Task 3: Setup ESLint & Prettier** (AC: 5)
  - [ ] Install ESLint 8.x and Prettier 3.x
  - [ ] Create `.eslintrc.js` with React Native rules
  - [ ] Create `.prettierrc` configuration
  - [ ] Add npm scripts: `lint`, `lint:fix`, `format`
  - [ ] Verify linting works on test file

- [ ] **Task 4: Create Project Directory Structure** (AC: 6)
  - [ ] Create `src/` folder with subfolders:
    - `src/components/ui/`
    - `src/components/layout/`
    - `src/screens/`
    - `src/navigation/`
    - `src/hooks/`
    - `src/services/api/`
    - `src/stores/`
    - `src/providers/`
    - `src/lib/`
    - `src/theme/`
    - `src/types/models/`
  - [ ] Create `assets/fonts/` and `assets/images/`
  - [ ] Create `__tests__/` folder structure

- [ ] **Task 5: Install Core Dependencies** (AC: 1, 2, 3)
  - [ ] Install React Navigation 6.x packages:
    - `@react-navigation/native`
    - `@react-navigation/native-stack`
    - `@react-navigation/bottom-tabs`
    - `react-native-screens`
    - `react-native-safe-area-context`
  - [ ] Install React Query (TanStack) 5.x:
    - `@tanstack/react-query`
  - [ ] Install Zustand 4.x for local state
  - [ ] Install AsyncStorage:
    - `@react-native-async-storage/async-storage`
  - [ ] Install Supabase client:
    - `@supabase/supabase-js`
    - `react-native-url-polyfill`

- [ ] **Task 6: Setup React Query Provider** (AC: 3)
  - [ ] Create `src/lib/queryClient.ts` with default options
  - [ ] Create `src/providers/QueryProvider.tsx`
  - [ ] Wrap App with QueryClientProvider

- [ ] **Task 7: Setup React Navigation with Tab Navigator** (AC: 2)
  - [ ] Create `src/navigation/types.ts` with navigation types
  - [ ] Create `src/navigation/MainTabs.tsx` with 3 placeholder tabs:
    - Explore (MapPin icon)
    - Boulders (Mountains icon - placeholder)
    - Profile (User icon)
  - [ ] Create `src/navigation/RootNavigator.tsx`
  - [ ] Create placeholder screens for each tab
  - [ ] Configure NavigationContainer in App.tsx

- [ ] **Task 8: Create Theme Foundation** (AC: 6)
  - [ ] Create `src/theme/colors.ts` with color tokens from Front-End Spec
  - [ ] Create `src/theme/spacing.ts` with spacing scale
  - [ ] Create `src/theme/typography.ts` (placeholder for fonts)

- [ ] **Task 9: Setup Environment Variables** (AC: 1)
  - [ ] Create `.env.example` with Supabase placeholders
  - [ ] Create `.env.local` (gitignored)
  - [ ] Add `.env.local` to `.gitignore`

- [ ] **Task 10: Verify App Launches** (AC: 7)
  - [ ] Run `npx expo start` and test on iOS simulator
  - [ ] Run `npx expo start` and test on Android emulator
  - [ ] Verify Tab navigation works between screens
  - [ ] Verify no TypeScript errors
  - [ ] Verify no ESLint errors

---

## Dev Notes

### Technology Versions (Source: architecture/tech-stack.md)

| Technology | Version | Purpose |
|------------|---------|---------|
| TypeScript | 5.3+ | Type safety |
| React Native | 0.73+ | Cross-platform |
| Expo SDK | 52+ | Managed workflow |
| React Navigation | 6.x | Tab + Stack navigation |
| React Query (TanStack) | 5.x | Server state, caching |
| Zustand | 4.x | Client state |
| ESLint | 8.x | Code quality |
| Prettier | 3.x | Formatting |
| @supabase/supabase-js | 2.x | Supabase client |
| @react-native-async-storage | 1.x | Local persistence |

### Project Structure (Source: architecture/project-structure.md)

```
climbing-app/
├── src/
│   ├── components/
│   │   ├── ui/                       # Design system primitives
│   │   └── layout/                   # Layout components
│   ├── screens/                      # Screen components
│   ├── navigation/
│   │   ├── types.ts                  # Navigation types
│   │   ├── RootNavigator.tsx
│   │   └── MainTabs.tsx
│   ├── hooks/                        # Custom React hooks
│   ├── services/api/                 # API layer
│   ├── stores/                       # Zustand stores
│   ├── providers/                    # React context providers
│   ├── lib/                          # Utilities & config
│   ├── theme/                        # Design system tokens
│   └── types/models/                 # TypeScript types
├── assets/
│   ├── fonts/
│   └── images/
├── __tests__/
├── app.json
├── tsconfig.json
├── .eslintrc.js
├── .prettierrc
└── package.json
```

### Navigation Types (Source: architecture/frontend-architecture.md)

```typescript
// src/navigation/types.ts
export type RootStackParamList = {
  Auth: undefined;
  Main: undefined;
};

export type MainTabParamList = {
  Explore: undefined;
  Boulders: undefined;
  Profile: undefined;
};
```

### React Query Configuration (Source: architecture/components-logical-components.md)

```typescript
// src/lib/queryClient.ts
import { QueryClient } from '@tanstack/react-query';

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000, // 5 minutes
      gcTime: 30 * 60 * 1000, // 30 minutes
      retry: 2,
      refetchOnWindowFocus: false,
    },
  },
});
```

### Theme Colors (Source: front-end-spec.md)

```typescript
// src/theme/colors.ts
export const colors = {
  primary: '#FF6B35',
  primaryLight: '#FF8A5C',
  primaryDark: '#E55A2B',
  secondary: '#2D3047',
  accent: '#1B998B',
  success: '#06D6A0',
  warning: '#FFD166',
  error: '#EF476F',
  white: '#FFFFFF',
  background: '#F8F9FA',
  border: '#E9ECEF',
  textSecondary: '#6C757D',
  textPrimary: '#212529',
} as const;
```

### TypeScript Configuration

```json
// tsconfig.json - key settings
{
  "compilerOptions": {
    "strict": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  }
}
```

### Environment Variables (Source: architecture/project-structure.md)

```
# .env.example
EXPO_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

### Tab Bar Configuration (Source: architecture/frontend-architecture.md)

- 3 tabs: Explore, Boulders, Profile
- Icons: phosphor-react-native (MapPin, Mountains, User)
- Active color: `colors.primary` (#FF6B35)
- Inactive color: `colors.textSecondary` (#6C757D)
- Tab bar height: 64px

---

## Testing

### Test File Location
`__tests__/` at project root

### Testing Standards (Source: architecture/testing-strategy.md)
- **Framework:** Jest 29.x + React Native Testing Library 12.x
- **Coverage target:** 80%+ for unit tests
- **Pattern:** Mock Supabase for service tests

### Testing Requirements for This Story
- No unit tests required for this setup story
- Verification is manual: app launches without errors
- Future stories will add tests to `__tests__/` folder

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-07 | 0.1 | Initial draft | Winston (Architect) |
| 2026-01-07 | 0.2 | Validated & Approved | PO Validation |

---

## Dev Agent Record

### Agent Model Used
_To be filled during implementation_

### Debug Log References
_To be filled during implementation_

### Completion Notes List
_To be filled during implementation_

### File List
_To be filled during implementation_

---

## QA Results
_To be filled after QA review_
